!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.BaseComponentLib=e():t.BaseComponentLib=e()}("undefined"!=typeof self?self:this,(()=>(()=>{var t={471:(t,e,n)=>{var r=n(835);r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals),(0,n(611).A)("2be46e8c",r,!1,{})},239:(t,e,n)=>{var r=n(171);r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[t.id,r,""]]),r.locals&&(t.exports=r.locals),(0,n(611).A)("87e29fa0",r,!1,{})},611:(t,e,n)=>{"use strict";function r(t,e){for(var n=[],r={},i=0;i<e.length;i++){var s=e[i],o=s[0],a={id:t+":"+i,css:s[1],media:s[2],sourceMap:s[3]};r[o]?r[o].parts.push(a):n.push(r[o]={id:o,parts:[a]})}return n}n.d(e,{A:()=>f});var i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var s={},o=i&&(document.head||document.getElementsByTagName("head")[0]),a=null,d=0,l=!1,c=function(){},u=null,h="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(t,e,n,i){l=n,u=i||{};var o=r(t,e);return A(o),function(e){for(var n=[],i=0;i<o.length;i++){var a=o[i];(d=s[a.id]).refs--,n.push(d)}for(e?A(o=r(t,e)):o=[],i=0;i<n.length;i++){var d;if(0===(d=n[i]).refs){for(var l=0;l<d.parts.length;l++)d.parts[l]();delete s[d.id]}}}}function A(t){for(var e=0;e<t.length;e++){var n=t[e],r=s[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(g(n.parts[i]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var o=[];for(i=0;i<n.parts.length;i++)o.push(g(n.parts[i]));s[n.id]={id:n.id,refs:1,parts:o}}}}function v(){var t=document.createElement("style");return t.type="text/css",o.appendChild(t),t}function g(t){var e,n,r=document.querySelector("style["+h+'~="'+t.id+'"]');if(r){if(l)return c;r.parentNode.removeChild(r)}if(p){var i=d++;r=a||(a=v()),e=C.bind(null,r,i,!1),n=C.bind(null,r,i,!0)}else r=v(),e=b.bind(null,r),n=function(){r.parentNode.removeChild(r)};return e(t),function(r){if(r){if(r.css===t.css&&r.media===t.media&&r.sourceMap===t.sourceMap)return;e(t=r)}else n()}}var x,m=(x=[],function(t,e){return x[t]=e,x.filter(Boolean).join("\n")});function C(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=m(e,i);else{var s=document.createTextNode(i),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(s,o[e]):t.appendChild(s)}}function b(t,e){var n=e.css,r=e.media,i=e.sourceMap;if(r&&t.setAttribute("media",r),u.ssrId&&t.setAttribute(h,e.id),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},835:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(354),i=n.n(r),s=n(314),o=n.n(s)()(i());o.push([t.id,".container[data-v-5f92d721]{width:600px;height:400px;box-sizing:border-box;border:1px solid red}.container .virtual-list-container[data-v-5f92d721]{width:100%;height:100%;overflow-y:scroll}.container .virtual-list-container .virtual-list-list[data-v-5f92d721]{width:100%}.container .virtual-list-container .virtual-list-list .virtual-list-item[data-v-5f92d721]{width:100%;height:100px;box-sizing:border-box;border:1px solid #000;text-align:center;font-size:20px;line-height:100px}","",{version:3,sources:["webpack://./src/components/VirtualList/index.vue"],names:[],mappings:"AAEA,4BACI,WAAA,CACA,YAAA,CACA,qBAAA,CACA,oBAAA,CAGA,oDACI,UAAA,CACA,WAAA,CACA,iBAAA,CAGA,uEACI,UAAA,CAGA,0FACI,UAAA,CACA,YAAA,CACA,qBAAA,CACA,qBAAA,CACA,iBAAA,CACA,cAAA,CACA,iBAAA",sourcesContent:["\r\n/* 容器布局并设置具体的宽高 */\r\n.container {\r\n    width: 600px;\r\n    height: 400px;\r\n    box-sizing: border-box;\r\n    border: 1px solid red;\r\n\r\n    /* 作为虚拟列表组件宽高由父组件决定，注意这里需要保证垂直方向有滚动条 */\r\n    .virtual-list-container {\r\n        width: 100%;\r\n        height: 100%;\r\n        overflow-y: scroll;\r\n\r\n        /* list 高度会用 JS 设置动态样式 */\r\n        .virtual-list-list {\r\n            width: 100%;\r\n\r\n            /* item 固定高度即可，其他样式仅为了做展示 */\r\n            .virtual-list-item {\r\n                width: 100%;\r\n                height: 100px;\r\n                box-sizing: border-box;\r\n                border: 1px solid #000;\r\n                text-align: center;\r\n                font-size: 20px;\r\n                line-height: 100px;\r\n            }\r\n        }\r\n    }\r\n}\r\n"],sourceRoot:""}]);const a=o},171:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var r=n(354),i=n.n(r),s=n(314),o=n.n(s)()(i());o.push([t.id,".virtual-list-item{width:100%;height:100px;box-sizing:border-box;border:1px solid #000;text-align:center;font-size:20px;line-height:100px}","",{version:3,sources:["webpack://./src/components/VirtualList/index.vue"],names:[],mappings:"AAEA,mBACI,UAAA,CACA,YAAA,CACA,qBAAA,CACA,qBAAA,CACA,iBAAA,CACA,cAAA,CACA,iBAAA",sourcesContent:["\r\n/* item 固定高度即可，其他样式仅为了做展示 */\r\n.virtual-list-item {\r\n    width: 100%;\r\n    height: 100px;\r\n    box-sizing: border-box;\r\n    border: 1px solid #000;\r\n    text-align: center;\r\n    font-size: 20px;\r\n    line-height: 100px;\r\n}\r\n"],sourceRoot:""}]);const a=o},314:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,i,s){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(r)for(var a=0;a<this.length;a++){var d=this[a][0];null!=d&&(o[d]=!0)}for(var l=0;l<t.length;l++){var c=[].concat(t[l]);r&&o[c[0]]||(void 0!==s&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=s),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),e.push(c))}},e}},354:t=>{"use strict";t.exports=function(t){var e=t[1],n=t[3];if(!n)return e;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),s="/*# ".concat(i," */");return[e].concat([s]).join("\n")}return[e].join("\n")}},486:(t,e,n)=>{"use strict";function r(t,e,n,r,i,s,o,a){var d,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),s&&(l._scopeId="data-v-"+s),o?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},l._ssrRegister=d):i&&(d=a?function(){i.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:i),d)if(l.functional){l._injectStyles=d;var c=l.render;l.render=function(t,e){return d.call(e),c(t,e)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,d):[d]}return{exports:t,options:l}}n.d(e,{A:()=>r})}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var s=e[r]={id:r,exports:{}};return t[r](s,s.exports,n),s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return(()=>{"use strict";n.d(r,{default:()=>s});var t=function(){return this._self._c,this._m(0)};t._withStripped=!0;class e{constructor(t,e){this.state={dataSource:[],itemHeight:100,viewHeight:0,maxCount:0},this.scrollStyle={},this.startIndex=0,this.endIndex=0,this.renderList=[],this.oldStartIndex=0,this.oContainer=document.querySelector(t),this.oList=document.querySelector(e)}init(){this.state.viewHeight=this.oContainer.offsetHeight,console.log("======offsetHeight",this.oContainer.offsetHeight),this.state.maxCount=Math.ceil(this.state.viewHeight/this.state.itemHeight)+1,this.bindEvent(),this.addData(),this.render()}addData(){for(let t=0;t<20;t++)this.state.dataSource.push(this.state.dataSource.length+1)}computedEndIndex(){const t=this.startIndex+this.state.maxCount;this.endIndex=this.state.dataSource[t]?t:this.state.dataSource.length}computedRenderList(){this.renderList=this.state.dataSource.slice(this.startIndex,this.endIndex)}computedScrollStyle(){const{dataSource:t,itemHeight:e}=this.state;this.scrollStyle={height:"".concat(t.length*e-this.startIndex*e,"px"),transform:"translate3d(0, ".concat(this.startIndex*e,"px, 0)")}}render(){this.computedEndIndex(),this.computedRenderList(),this.computedScrollStyle();const t=this.renderList.map((t=>'<div class="virtual-list-item">'.concat(t,"</div>"))).join(""),{height:e,transform:n}=this.scrollStyle;this.oList.innerHTML=t,this.oList.style.height=e,this.oList.style.transform=n}bindEvent(){this.oContainer.addEventListener("scroll",this.rafThrottle(this.handleScroll.bind(this)))}handleScroll(){const{scrollTop:t}=this.oContainer;this.startIndex=Math.floor(t/this.state.itemHeight),this.startIndex!==this.oldStartIndex&&(this.render(),this.oldStartIndex=this.startIndex)}rafThrottle(t){let e=!1;return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];window.requestAnimationFrame((()=>{e||(e=!0,t.apply(this,r),e=!1)}))}}}const i={name:"virtual-list",props:{},data:()=>({instance:null}),mounted(){this.instance=new e(".virtual-list-container",".virtual-list-list"),this.instance.init()},methods:{handleClick(){this.$emit("click")}}};n(471),n(239);const s=(0,n(486).A)(i,t,[function(){var t=this._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"virtual-list-container"},[t("div",{staticClass:"virtual-list-list"})])])}],!1,null,"5f92d721",null).exports})(),r.default})()));
//# sourceMappingURL=virtual-list.js.map